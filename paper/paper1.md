# Reverse Engineering 방지를 위한 PCB 설계 최적화: 강화학습 기반 배치/배선 다양성 생성 기법

### 1. 문제의식 및 연구 동기

전자회로 설계를 위한 PCB(Printed Circuit Board) 파일은 제조업체 또는 협력업체와의 협업 과정에서 외부로 유출될 수 있다. `.kicad_pcb`와 같은 파일은 회로의 전체 구조 정보를 포함하고 있어, 악의적 제3자가 이를 입수하면 비교적 쉽게 회로를 분석하고 재현할 수 있다. 이로 인해 지적 재산권 침해, 제품 모방, 보안 취약점 분석 등 다양한 위협이 발생할 수 있다.

특히 최근엔 AI 기반 회로 분석 기술의 발전으로 역공학(Reversing) 소요 시간과 비용이 지속적으로 감소하고 있어, 회로의 기능은 유지하되 구조적 복잡성을 높여 분석 난이도를 증가시키는 기술의 필요성이 커지고 있다.

### 2. 제안 아이디어

본 연구에서는 **강화학습 기반의 PCB 자동 배치·배선 시스템**을 활용하여 **Obfuscated Layout**, 즉 **역공학 방지를 고려한 설계 다양화 구조**를 자동 생성하는 방법을 제안한다. 주요 특징은 다음과 같다:

- **기능 등가 회로**(Functionally Equivalent Circuit)를 **다양한 배치 구조**로 설계하여 분석자의 회로 추론을 어렵게 함
- 동일한 회로를 **다양한 시각적/공간적 형태**로 표현함으로써, 기존 Rule-based 추론 알고리즘 및 Neural Decoder의 성능을 저하시킴
- **보상함수 설계**를 통해 동작 유지와 분석 방지라는 상반된 목표를 조화롭게 달성

### 3. 시스템 구성 및 핵심 기술 요소

#### 3.1 KiCad 기반 학습 환경

- **학습 대상 회로**는 KiCad에서 생성된 `.kicad_pcb` 파일로 구성
- 강화학습 에이전트는 부품 배치 좌표 및 배선 경로를 수정하며 새로운 layout을 생성
- **DRC(Design Rule Check)** 및 시뮬레이션을 통해 회로 기능 보존 여부를 평가

#### 3.2 보상 함수 설계

- ✅ **Positive Reward**:  
  - 회로의 동작이 정상적으로 유지될 경우
  - 기존 설계 대비 obfuscation score 증가 시
- ❌ **Negative Reward**:  
  - 동일 기능 회로를 쉽게 유추할 수 있는 구조
  - 회로 간 layout similarity가 높은 경우
- 🧠 **Obfuscation Metric**:
  - 배치 diversity, 부품간 간격 무작위성, 라우팅 패턴 복잡도, symmetry breaking 등을 종합한 metric을 통해 측정

#### 3.3 Layout 다양성 생성 알고리즘

- 유사 회로 간 **layout similarity metric** 정의: Graph Edit Distance, Structural Entropy, Layout Hash 등
- 에이전트는 회로의 기능을 유지하는 선에서 배치/배선의 **공간적 변형** 및 **비선형 배치**를 시도
- **데이터 증강 기법**: 동일 회로에 대해 복수 layout을 생성하여 학습 데이터로 활용 가능

#### 3.4 공격 모델 정의

- **Static 분석 기반** 역공학 모델: 회로 배선 및 구성 정보를 기반으로 netlist 복원
- **AI 기반 자동 추론 모델**: GNN 또는 Transformer 기반 layout-to-schematic 디코더
- 본 연구의 obfuscation 전략은 이러한 공격 모델의 **성공률 감소** 또는 **추론 시간 증가**를 목표로 설계됨

### 4. 실험 설계 및 평가

#### 4.1 실험 데이터셋

- 간단한 논리회로부터 중간 규모의 제어 회로까지 약 30종의 회로 활용
- 각 회로에 대해 baseline layout과 obfuscated layout 비교

#### 4.2 평가 지표

| 항목 | 설명 |
|------|------|
| 기능 정확도 | 변경된 회로가 원래와 동일하게 동작하는가 |
| Obfuscation Score | layout diversity 및 구조 복잡도 지표 |
| Similarity Score | 기존 layout과의 유사도 (낮을수록 좋음) |
| RE 공격 성공률 | AI 기반 공격자가 netlist를 복원하는 정확도 |
| 공격 소요 시간 | 정적 분석 또는 AI 추론 모델의 평균 분석 시간 |

#### 4.3 예비 결과 (가정 기반 예시)

- 기능 유지율: 98% 이상
- layout similarity score: 0.25 (baseline 대비 62% 감소)
- AI 기반 회로 추론 정확도: 85% → 47%로 감소
- RE 공격 평균 시간: 약 2.3배 증가

### 5. 기대 효과 및 향후 과제

#### 기대 효과

- **IP 보호**: 회로 설계 정보의 보안 수준 향상
- **자동화 설계**: AI 기반 obfuscation 기술의 실무 적용 가능성
- **학습 기반 다양화**: 동일 회로에 대한 다양한 레이아웃 제공 가능

#### 향후 연구 과제

- 전문가 설계 데이터를 활용한 Obfuscation 강화
- 다중 공격자 유형(전문가, AI, 하이브리드)에 대응한 보상 모델 개선
- 상용 EDA 툴(KiCad, Altium, Cadence 등)과의 호환성 확보

---

원하시면 위 내용을 기반으로 PPT, 학술지 논문 형식, 발표 원고 등으로 재구성해 드릴 수 있습니다.
